{"ast":null,"code":"var _jsxFileName = \"D:\\\\scaler assignment\\\\cab-booking-frontend\\\\src\\\\components\\\\bookingform.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport './bookingform.css';\nimport CabList from './cablist';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction BookingForm() {\n  _s();\n  const [email, setEmail] = useState('');\n  const [source, setSource] = useState('');\n  const [destination, setDestination] = useState('');\n  const [cabs, setCabs] = useState([]);\n  const [selectedCab, setSelectedCab] = useState(null);\n  const [getShortestRoute, setShortestRoute] = useState('');\n  const handleBooking = async () => {\n    try {\n      // Send a POST request to your backend to book a cab\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/cab/bookCab`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: {\n          email,\n          source,\n          destination,\n          vehicleNumber: selectedCab.vehicleNumber\n        }\n      });\n      if (response.ok) {\n        // Handle success - display a success message or redirect to a confirmation page\n        console.log('Booking successful.');\n      } else {\n        // Handle error\n        console.error('Booking failed.');\n      }\n    } catch (error) {\n      console.error('An error occurred:', error);\n    }\n  };\n  const handleSearchCabs = async () => {\n    if (!source || !destination) {\n      console.error('Source and destination are required.');\n      return;\n    }\n\n    // Check if the source and destination are within the valid range A to F\n    const validSources = ['A', 'B', 'C', 'D', 'E', 'F'];\n    if (!validSources.includes(source) || !validSources.includes(destination)) {\n      console.error('Source and destination must be in the range A to F.');\n      return;\n    }\n    try {\n      const routeResponse = await fetch(`${process.env.REACT_APP_API_BASE_URL}/cab/getShortestRoute?src=${source}&dst=${destination}`);\n      const routeData = await routeResponse.json();\n      setShortestRoute(routeData.shortestRoute);\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/cab/getAllCabStatus`);\n      if (response.ok) {\n        const data = await response.json();\n        console.log(data);\n        setCabs(data.CabStatus);\n      } else {\n        console.error('Cab search failed.');\n      }\n    } catch (error) {\n      console.error('An error occurred:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Book a Cab\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"source\",\n        children: \"Source:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"source\",\n        value: source,\n        onChange: e => setSource(e.target.value),\n        placeholder: \"Source\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"destination\",\n        children: \"Destination:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"destination\",\n        value: destination,\n        onChange: e => setDestination(e.target.value),\n        placeholder: \"Destination\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSearchCabs,\n        children: \"Search for Cabs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cab-box\",\n      children: cabs.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Available Cabs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), cabs.map((cab, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cab-button\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cab-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Cab Name: \", cab === null || cab === void 0 ? void 0 : cab.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Vehicle Number: \", cab === null || cab === void 0 ? void 0 : cab.vehicleNumber]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Rate per hour: \", cab === null || cab === void 0 ? void 0 : cab.rate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Time: \", getShortestRoute.totalTime]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Total price: \", getShortestRoute.totalTime * cab.rate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 33\n          }, this)\n        }, index + 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }, this))]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true);\n}\n_s(BookingForm, \"caLdbNLf9KqewmdvBxaDM2/76rg=\");\n_c = BookingForm;\nexport default BookingForm;\nvar _c;\n$RefreshReg$(_c, \"BookingForm\");","map":{"version":3,"names":["React","useState","CabList","jsxDEV","_jsxDEV","Fragment","_Fragment","BookingForm","_s","email","setEmail","source","setSource","destination","setDestination","cabs","setCabs","selectedCab","setSelectedCab","getShortestRoute","setShortestRoute","handleBooking","response","fetch","process","env","REACT_APP_API_BASE_URL","method","headers","body","vehicleNumber","ok","console","log","error","handleSearchCabs","validSources","includes","routeResponse","routeData","json","shortestRoute","data","CabStatus","children","className","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","id","value","onChange","e","target","placeholder","onClick","length","map","cab","index","name","rate","totalTime","_c","$RefreshReg$"],"sources":["D:/scaler assignment/cab-booking-frontend/src/components/bookingform.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './bookingform.css';\r\nimport CabList from './cablist';\r\n\r\nfunction BookingForm() {\r\n    const [email, setEmail] = useState('');\r\n    const [source, setSource] = useState('');\r\n    const [destination, setDestination] = useState('');\r\n    const [cabs, setCabs] = useState([]);\r\n    const [selectedCab, setSelectedCab] = useState(null);\r\n    const [getShortestRoute, setShortestRoute] = useState('');\r\n\r\n    \r\n\r\n\r\n    const handleBooking = async () => {\r\n\r\n        try {\r\n            // Send a POST request to your backend to book a cab\r\n            const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/cab/bookCab`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: { email, source, destination, vehicleNumber: selectedCab.vehicleNumber },\r\n            });\r\n\r\n            if (response.ok) {\r\n                // Handle success - display a success message or redirect to a confirmation page\r\n                console.log('Booking successful.');\r\n            } else {\r\n                // Handle error\r\n                console.error('Booking failed.');\r\n            }\r\n        } catch (error) {\r\n            console.error('An error occurred:', error);\r\n        }\r\n    }\r\n\r\n    const handleSearchCabs = async () => {\r\n        if (!source || !destination) {\r\n            console.error('Source and destination are required.');\r\n            return;\r\n        }\r\n    \r\n        // Check if the source and destination are within the valid range A to F\r\n        const validSources = ['A', 'B', 'C', 'D', 'E', 'F'];\r\n        if (!validSources.includes(source) || !validSources.includes(destination)) {\r\n            console.error('Source and destination must be in the range A to F.');\r\n            return;\r\n        }\r\n    \r\n        try {\r\n            const routeResponse = await fetch(\r\n                `${process.env.REACT_APP_API_BASE_URL}/cab/getShortestRoute?src=${source}&dst=${destination}`\r\n            );\r\n            const routeData = await routeResponse.json();\r\n            setShortestRoute(routeData.shortestRoute);\r\n            const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/cab/getAllCabStatus`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                console.log(data);\r\n                setCabs(data.CabStatus);\r\n            } else {\r\n                console.error('Cab search failed.');\r\n            }\r\n        } catch (error) {\r\n            console.error('An error occurred:', error);\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <>\r\n        <div className=\"booking-form\">\r\n            <h2>Book a Cab</h2>\r\n            <label htmlFor=\"source\">Source:</label>\r\n            <input\r\n                type=\"text\"\r\n                id=\"source\"\r\n                value={source}\r\n                onChange={(e) => setSource(e.target.value)}\r\n                placeholder=\"Source\"\r\n            />\r\n            <label htmlFor=\"destination\">Destination:</label>\r\n            <input\r\n                type=\"text\"\r\n                id=\"destination\"\r\n                value={destination}\r\n                onChange={(e) => setDestination(e.target.value)}\r\n                placeholder=\"Destination\"\r\n            />\r\n            <button onClick={handleSearchCabs}>Search for Cabs</button>\r\n            \r\n        </div>\r\n         <div className='cab-box'>\r\n                 {cabs.length > 0 && (\r\n                <>\r\n                    <h3>Available Cabs</h3>\r\n                        {cabs.map((cab, index) => (\r\n                            <button className='cab-button' key={index + 1}>\r\n                                <div className='cab-container'>\r\n                                    <h3>Cab Name: {cab?.name}</h3>\r\n                                    <h3>Vehicle Number: {cab?.vehicleNumber}</h3>\r\n                                    <p>Rate per hour: {cab?.rate}</p>\r\n                                    <p>Time: {getShortestRoute.totalTime}</p>\r\n                                    <p>Total price: {getShortestRoute.totalTime * cab.rate}</p>\r\n                                </div>\r\n                            </button>\r\n                        ))}\r\n                </>\r\n            )}\r\n         </div>\r\n         </>\r\n    );\r\n}\r\n\r\nexport default BookingForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}